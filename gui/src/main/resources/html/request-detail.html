<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <link rel="stylesheet" href="../lib/bootstrap/bootstrap.css"/>
        <link rel="stylesheet" href="../lib/highlight/default.min.css"/>
        <link rel="stylesheet" href="../css/webview/detail-tab.css"/>
        <script src="../lib/bootstrap/bootstrap.min.js"></script>
        <script src="../lib/highlight/highlight.min.js"></script>
        <script src="../lib/jq/jquery-3.7.0.min.js"></script>
        <style>

        </style>
    </head>
    <body>
        <div class="container-fluid main">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active fw-bold" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">
                        Overview
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold" id="request-tab" data-bs-toggle="tab" data-bs-target="#request-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">
                        &nbsp;Request&nbsp;
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold" id="response-tab" data-bs-toggle="tab" data-bs-target="#response-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">
                        Response
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold" id="timing-tab" data-bs-toggle="tab" data-bs-target="#timing-tab-pane" type="button" role="tab" aria-controls="disabled-tab-pane" aria-selected="false">
                        &nbsp;Timing&nbsp;
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="overview-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                    <div class="container-fluid">
                        <div class="row">
                            <button class="btn btn-light text-start fw-bold tab-title" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                                <img class="play-icon spanReset" src="../image/play-solid.svg" alt="">
                                Overview
                            </button>
                            <div class="collapse" id="collapseExample">
                                <div class="card card-body border-light ">
                                    <code class="language-headers">
                                    </code>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <button class="btn btn-light text-start fw-bold tab-title" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDetail" aria-expanded="false" aria-controls="collapseExample">
                                <img class="play-icon spanReset" src="../image/play-solid.svg" alt="">
                                Detail
                            </button>
                            <div class="collapse" id="collapseDetail">
                                <div class="card card-body border-light ">
                                    <code class="language-json">
                                    </code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="request-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                    Request
                </div>
                <div class="tab-pane fade" id="response-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
                    Response
                </div>
                <div class="tab-pane" id="timing-tab-pane" role="tabpanel"  tabindex="0">
                    timing
                </div>
            </div>
        </div>

        <script src="../js/detail-tab-main.js"></script>
        <script>
            $(function () {
                bindEvents();

                hljs.configure({
                    tabReplace: '    ', // 4 spaces
                });
                hljs.registerLanguage('headers', function () {
                    return {
                        name: "headers",
                        case_insensitive: true, // language is case-insensitive
                        keywords: '',
                        scope: "test",
                        contains: [
                            {
                                unicodeRegex: '.+?:',
                                scope: 'headers-key',
                                begin: /^.+?:\s/,
                                // end: '\w'
                            }
                        ]
                    }
                });
                initTestData();
                // hljs.highlightAll();
            });

            function bindEvents() {
                $('.btn.tab-title').click(function () {
                    $(this).children('.play-icon').toggleClass('spanRotate');
                })
            }

            function initTestData() {
                initData("collapseExample", `User-Agent: for "Mozilla: /5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36\nHost: google.com`);
                initData("collapseDetail", `{\n    "name": "JacK",\n\t"age": 23,\n\t"Num": 23\n}`);
            }

            function initData(tabId, content) {
                let selector = `#${tabId} .card code`;
                let ele = $(selector).text(content);
                hljs.highlightElement($(selector)[0]);
            }
        </script>
    </body>
</html>